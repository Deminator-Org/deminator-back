<!DOCTYPE html>
<html lang="en">
<head>
	<title>Deminator - API Test</title>
	<meta charset="UTF-8"/>

	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
	<script src="main.js"></script>

	<script>
		// Bind functions
		function init() {
			{ // API 1: GET /
				$("#api1 > .send > .send_btn").click(api1_clickSend);
				const autosend_cb = $("#api1 > .send > .autosend_cb");
				const autosend_freq = $("#api1 > .send > .autosend_freq");
				const resetAutosend = ()=>api1_clickAutosend(autosend_cb.val(), (int)(autosend_freq.val()));
				autosend_cb.change(resetAutosend);
				autosend_freq.change(resetAutosend);
			}
			{ // API 2: GET /<roomName>
				const roomName = $("#api2 > .params > .roomName");
				const autosend_cb = $("#api2 > .send > .autosend_cb");
				const autosend_freq = $("#api2 > .send > .autosend_freq");
				$("#api2 > .send > .send_btn").click(()=>api2_clickSend(roomName.val()));
				const resetAutosend = ()=>api2_clickAutosend(autosend_cb.val(), (int)(autosend_freq.val()), roomName.val());
				autosend_cb.change(resetAutosend);
				autosend_freq.change(resetAutosend);
			}
		}

		function getOrigin() {
			return $("#origin_ip").val();
		}

		function api1_out(value) { $("#api1 > output").html(value); }
		function api2_out(value) { $("#api2 > output").html(value); }

	</script>
	<style>
		body {
			display: flex;
		}
	</style>
</head>
<body onload="init()">
	<div id="origin">
		Origin: <input id="origin_ip" value="localhost:8081" />
	</div>
	<div id="api1">
		<h1>GET: /</h1>
		<div class="send">
			<div class="autosend"><input class="autosend_cb" type="checkbox" /> Autosend every <input class="autosend_freq" type="number" min="1" value="30" />s</div><br/>
			<button class="send_btn">Send</button>
		</div>
		<div class="output"></div>
	</div>
	<div id="api2">
		<h1>GET: /&lt;roomName&gt;</h1>
		<div class="params">
			RoomName: <input class="roomName"/>
		</div>
		<div class="send">
			<div class="autosend"><input class="autosend_cb" type="checkbox" /> Autosend every <input class="autosend_freq" type="number" min="1" value="30" />s</div><br/>
			<button class="send_btn">Send</button>
		</div>
		<div class="output"></div>
	</div>
</body>
</html>
